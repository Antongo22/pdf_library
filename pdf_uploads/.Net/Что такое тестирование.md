# üß™ –ß—Ç–æ —Ç–∞–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî —ç—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–æ–≤–µ—Ä–∫–∏, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏ –Ω–∞–¥—ë–∂–Ω–æ. –í .NET/C# —á–∞—â–µ –≤—Å–µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏:

* `xUnit` ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∏ –ª—ë–≥–∫–∏–π (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è Microsoft)
* `NUnit` ‚Äî —Å—Ç–∞—Ä—à–µ, —Å –±–æ–≥–∞—Ç–æ–π —ç–∫–æ—Å–∏—Å—Ç–µ–º–æ–π
* `MSTest` ‚Äî –≤—Å—Ç—Ä–æ–µ–Ω –≤ Visual Studio

---

## üß± –í–∏–¥—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

| –í–∏–¥                  | –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç                       | –ü—Ä–∏–º–µ—Ä—ã                               |
| -------------------- | ----------------------------------- | ------------------------------------- |
| ‚úÖ Unit-—Ç–µ—Å—Ç—ã         | –ú–∞–ª–µ–Ω—å–∫–∏–µ –±–ª–æ–∫–∏ (–∫–ª–∞—Å—Å—ã, –º–µ—Ç–æ–¥—ã)    | `MathService.Add(2, 2)` ‚Üí `4`         |
| üîó Integration-—Ç–µ—Å—Ç—ã | –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤          | `UserController` + `UserService` + DB |
| üåê End-to-End (E2E)  | –í—Å—ë –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç –Ω–∞—á–∞–ª–∞ –¥–æ –∫–æ–Ω—Ü–∞   | –¢–µ—Å—Ç —Ä–µ–∞–ª—å–Ω–æ–≥–æ HTTP-–∑–∞–ø—Ä–æ—Å–∞ –∫ API     |
| üîç Smoke / Sanity    | –ë–∞–∑–æ–≤—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏, ¬´–Ω–µ —É–ø–∞–ª –ª–∏ –±–∏–ª–¥¬ª | –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ API –æ—Ç–≤–µ—á–∞–µ—Ç `200 OK`   |
| üß™ UI-—Ç–µ—Å—Ç—ã          | –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –ø–æ–≤–µ–¥–µ–Ω–∏–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ     | Selenium, Playwright                  |

---

## üß∞ –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ –≤ C# –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

| –ó–∞–¥–∞—á–∞              | –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç                         |
| ------------------- | ---------------------------------- |
| –¢–µ—Å—Ç-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫      | `xUnit`, `NUnit`, `MSTest`         |
| –ú–æ–∫–∏/–∑–∞–≥–ª—É—à–∫–∏       | `Moq`, `NSubstitute`               |
| –ü—Ä–æ–≤–µ—Ä–∫–∏ (`assert`) | `FluentAssertions`                 |
| –¢–µ—Å—Ç—ã –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤  | `Microsoft.AspNetCore.Mvc.Testing` |
| –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Allure | `Allure.Commons`                   |

---

## üß™ –ü—Ä–∏–º–µ—Ä –ø—Ä–æ—Å—Ç–æ–≥–æ Unit-—Ç–µ—Å—Ç–∞ (`xUnit`)

```csharp
public class MathService
{
    public int Add(int a, int b) => a + b;
}
```

```csharp
public class MathServiceTests
{
    [Fact]
    public void Add_ReturnsSum()
    {
        var service = new MathService();
        var result = service.Add(2, 3);
        Assert.Equal(5, result);
    }
}
```

---

# üß± –ü–∞—Ç—Ç–µ—Ä–Ω—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–≠—Ç–æ **—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã** –∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤: —á—Ç–æ–±—ã –æ–Ω–∏ –±—ã–ª–∏ –ø–æ–Ω—è—Ç–Ω—ã, –Ω–∞–¥—ë–∂–Ω—ã –∏ –ø–æ–∫—Ä—ã–≤–∞–ª–∏ –≤–∞–∂–Ω–æ–µ.

---

## 1. AAA ‚Äî **Arrange, Act, Assert**

–°–∞–º—ã–π –ø–æ–ø—É–ª—è—Ä–Ω—ã–π —à–∞–±–ª–æ–Ω –¥–ª—è —é–Ω–∏—Ç-—Ç–µ—Å—Ç–æ–≤.

```csharp
[Fact]
public void Subtract_ReturnsCorrectResult()
{
    // Arrange
    var calc = new Calculator();

    // Act
    var result = calc.Subtract(10, 4);

    // Assert
    Assert.Equal(6, result);
}
```

* **Arrange** ‚Äî –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (–æ–±—ä–µ–∫—Ç—ã, –º–æ–∫–∏)
* **Act** ‚Äî –≤—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞
* **Assert** ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

---

## 2. BDD ‚Äî **Behavior-Driven Development**

–§–æ–∫—É—Å –Ω–∞ **–ø–æ–≤–µ–¥–µ–Ω–∏–µ**, –∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é. –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –≤—Ä–æ–¥–µ **SpecFlow**.

```csharp
[Theory]
[InlineData(5, true)]
[InlineData(-3, false)]
public void IsPositive_ReturnsCorrectResult(int number, bool expected)
{
    var service = new MathService();
    var result = service.IsPositive(number);
    result.Should().Be(expected); // FluentAssertions
}
```

BDD: `Given`, `When`, `Then` (–º–æ–∂–Ω–æ –ø—Ä—è–º–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å Gherkin-—Å—Ü–µ–Ω–∞—Ä–∏—è–º–∏).

---

## 3. TDD ‚Äî **Test-Driven Development**

–¶–∏–∫–ª "–∫—Ä–∞—Å–Ω—ã–π‚Äì–∑–µ–ª—ë–Ω—ã–π‚Äì—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥":

1. ‚úç –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç ‚Üí ‚ùå (–æ–Ω –Ω–µ —Å–∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –∏–ª–∏ —É–ø–∞–¥—ë—Ç)
2. üü¢ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–∏–Ω–∏–º—É–º, —á—Ç–æ–±—ã —Ç–µ—Å—Ç –ø—Ä–æ—à—ë–ª
3. üßπ –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥

–ü—Ä–∏–º–µ—Ä:

```csharp
[Fact]
public void ShouldReturnTrueIfEven()
{
    var logic = new MathLogic();
    Assert.True(logic.IsEven(2));
}
```

–ó–∞—Ç–µ–º —Å–æ–∑–¥–∞—ë–º –º–µ—Ç–æ–¥ `IsEven` –∏ –ø–∏—à–µ–º —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –ø–æ–¥ —Ç–µ—Å—Ç.

---

## 4. Fixture / Setup

–ü–æ–∑–≤–æ–ª—è–µ—Ç **–ø–æ–≤—Ç–æ—Ä–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–¥–≥–æ—Ç–æ–≤–∫—É**:

```csharp
public class MyFixture
{
    public MyService Service { get; }

    public MyFixture()
    {
        Service = new MyService();
    }
}

public class MyServiceTests : IClassFixture<MyFixture>
{
    private readonly MyFixture _fixture;

    public MyServiceTests(MyFixture fixture)
    {
        _fixture = fixture;
    }

    [Fact]
    public void Test()
    {
        var result = _fixture.Service.DoSomething();
        Assert.True(result);
    }
}
```

---

## 5. Mocks, Stubs, Fakes

* **Stub** ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
* **Mock** ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –≤—ã–∑—ã–≤–∞–ª—Å—è –ª–∏ –º–µ—Ç–æ–¥ (—Å Moq)
* **Fake** ‚Äî –ø—Ä–æ—Å—Ç–∞—è, –Ω–æ —Ä–∞–±–æ—á–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (–≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç stub)

–ü—Ä–∏–º–µ—Ä —Å `Moq`:

```csharp
var repo = new Mock<IUserRepository>();
repo.Setup(x => x.GetUser(1)).Returns(new User("Anton"));

var service = new UserService(repo.Object);

var user = service.GetUser(1);

Assert.Equal("Anton", user.Name);
```

---

## 6. Test Pyramid

üì∂ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤:

```
       üß™ E2E (–º–∞–ª–æ, –¥–æ—Ä–æ–≥–∏–µ)
      üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ (—Å—Ä–µ–¥–Ω–µ)
    ‚úÖ –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã (–º–Ω–æ–≥–æ –∏ –±—ã—Å—Ç—Ä—ã–µ)
```

---

## 7. Code Coverage

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç, **–Ω–∞—Å–∫–æ–ª—å–∫–æ –≤–∞—à –∫–æ–¥ –ø–æ–∫—Ä—ã—Ç —Ç–µ—Å—Ç–∞–º–∏**.

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:

* `coverlet` + `reportgenerator`
* Visual Studio –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑
* JetBrains dotCover

---

## üì¶ –ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–µ—Å—Ç–æ–≤ –≤ –ø—Ä–æ–µ–∫—Ç–µ

```
MyApp/
  ‚îî‚îÄ‚îÄ MyApp.csproj
  ‚îî‚îÄ‚îÄ Program.cs
  ‚îî‚îÄ‚îÄ Services/
Tests/
  ‚îî‚îÄ‚îÄ MyApp.Tests.csproj
  ‚îî‚îÄ‚îÄ Services/
         ‚îî‚îÄ‚îÄ MathServiceTests.cs
```

---

## üöÄ –°–æ–≤–µ—Ç—ã –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

‚úÖ –ü–∏—à–∏ —Ç–µ—Å—Ç—ã —Å—Ä–∞–∑—É (TDD –∏–ª–∏ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –Ω–∞–ø–∏—Å–∞–Ω–∏—è –º–µ—Ç–æ–¥–∞)

‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π –ø–∞—Ç—Ç–µ—Ä–Ω AAA

‚úÖ –î–µ–ª–∞–π —Ç–µ—Å—Ç—ã –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–º–∏

‚úÖ –ù–µ –±–æ–π—Å—è –º–æ–∫–æ–≤ –∏ —Ñ–∏–∫—Å—Ç—É—Ä

üö´ –ù–µ –ø–∏—à–∏ –ª–æ–≥–∏–∫—É –≤ —Ç–µ—Å—Ç–∞—Ö

üö´ –ù–µ —Ç–µ—Å—Ç–∏—Ä—É–π `ToString()` –∏–ª–∏ –≥–µ—Ç—Ç–µ—Ä—ã, –µ—Å–ª–∏ –≤ –Ω–∏—Ö –Ω–µ—Ç –ª–æ–≥–∏–∫–∏

