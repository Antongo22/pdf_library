# ๐ฆ ะะฐะผััั ะฒ C#: ะกัะตะบ ะธ ะััะฐ

## ๐ง ะะฐะบ ัะฐะฑะพัะฐะตั ะฟะฐะผััั ะฒ .NET?

ะัะพะณัะฐะผะผั ะฝะฐ C# (ะธ .NET ะฒ ัะตะปะพะผ) ะฒัะฟะพะปะฝััััั ะฒะฝัััะธ **CLR (Common Language Runtime)**. CLR ัะฟัะฐะฒะปัะตั:

- ะะฐะทะผะตัะตะฝะธะตะผ ะฟะตัะตะผะตะฝะฝัั ะฒ ะฟะฐะผััะธ
- ะะธะทะฝะตะฝะฝัะผ ัะธะบะปะพะผ ะพะฑัะตะบัะพะฒ
- ะะฒัะพะผะฐัะธัะตัะบะธะผ ัะฐัะฟัะตะดะตะปะตะฝะธะตะผ ะธ ะพัะฒะพะฑะพะถะดะตะฝะธะตะผ ะฟะฐะผััะธ

ะะฐะผััั ะดะตะปะธััั ะฝะฐ **ะดะฒะต ะบะปััะตะฒัะต ะพะฑะปะฐััะธ**:

- **ะกัะตะบ (Stack)** โ ะดะปั ะฒัะตะผะตะฝะฝัั ะธ "ะปัะณะบะธั" ะดะฐะฝะฝัั
- **ะััะฐ (Heap)** โ ะดะปั ะพะฑัะตะบัะพะฒ ะธ ะฒัะตะณะพ, ััะพ ัะพะทะดะฐัััั ะดะธะฝะฐะผะธัะตัะบะธ

---

## ๐ ะกัะตะบ

### ๐ ะงัะพ ััะพ?

`Stack` โ ััะพ ะพะฑะปะฐััั ะฟะฐะผััะธ, ะบะพัะพัะฐั ัะฐะฑะพัะฐะตั ะฟะพ ะฟัะธะฝัะธะฟั **LIFO** (*Last In โ First Out*).

### ๐ ะ ััะตะบะต ััะฐะฝัััั:

- ะะพะบะฐะปัะฝัะต ะฟะตัะตะผะตะฝะฝัะต ะฟัะธะผะธัะธะฒะฝัั ัะธะฟะพะฒ (`int`, `double`, `bool`)
- ะะฐัะฐะผะตััั ะผะตัะพะดะพะฒ
- ะกััะปะบะธ ะฝะฐ ะพะฑัะตะบัั ะฒ ะบััะต
- ะะฝะฐัะธะผัะต ัะธะฟั (ััััะบัััั)

### ๐ ะะฐะบ ัะฐะฑะพัะฐะตั ััะตะบ?

ะะฐะถะดัะน ะฒัะทะพะฒ ะผะตัะพะดะฐ ะดะพะฑะฐะฒะปัะตั ("ะฒัะฐะปะบะธะฒะฐะตั") ะฒ ััะตะบ ััะตะนะผ, ะฒ ะบะพัะพัะพะผ ััะฐะฝัััั ะตะณะพ ะปะพะบะฐะปัะฝัะต ะฟะตัะตะผะตะฝะฝัะต ะธ ะฟะฐัะฐะผะตััั. ะะพะณะดะฐ ะผะตัะพะด ะทะฐะฒะตััะฐะตั ะฒัะฟะพะปะฝะตะฝะธะต โ ััะตะนะผ ัะดะฐะปัะตััั.

```plaintext
Main()
โโโโโโโโโโโโโโโโ
โ int a = 10;  โ โ ะปะพะบะฐะปัะฝะฐั ะฟะตัะตะผะตะฝะฝะฐั
โ Call Foo()   โ โ ะฒัะทะพะฒ ะผะตัะพะดะฐ
โโโโโโโโโโโโโโโโ
      โ
Foo()
โโโโโโโโโโโโโโโโ
โ int b = 5;   โ โ ะฟะตัะตะผะตะฝะฝะฐั Foo
โโโโโโโโโโโโโโโโ
````

ะะพะณะดะฐ `Foo` ะทะฐะฒะตััะธััั, ะตะณะพ ััะตะนะผ ัะดะฐะปะธััั.

---

## ๐งฑ ะััะฐ

### ๐ ะงัะพ ััะพ?

`Heap` โ ััะพ ะพะฑะปะฐััั ะฟะฐะผััะธ ะดะปั **ะดะพะปะณะพะถะธะฒััะธั ะพะฑัะตะบัะพะฒ**, ะฒัะดะตะปัะตะผะฐั ะดะธะฝะฐะผะธัะตัะบะธ ั ะฟะพะผะพััั ะบะปััะตะฒะพะณะพ ัะปะพะฒะฐ `new`.

### ๐ ะ ะบััะต ััะฐะฝัััั:

* ะะฑัะตะบัั ะบะปะฐััะพะฒ (`new Person()`)
* ะะฐััะธะฒั (`new int[1000]`)
* `string`
* ะะตะปะตะณะฐัั
* ะัั, ััะพ ัะพะทะดะฐัััั ัะตัะตะท `new`

> ะะฐะถะฝะพ: ะฒ ััะตะบะต ะพััะฐัััั **ัััะปะบะฐ** ะฝะฐ ะพะฑัะตะบั ะฒ ะบััะต.

---

## ๐ก ะัะธะผะตั: ััะตะบ ะธ ะบััะฐ ะฒะผะตััะต

```csharp
class Person {
    public string Name;
}

void Main() {
    int x = 42;                        // ะะฝะฐัะธะผัะน ัะธะฟ โ ะฒ ััะตะบะต
    Person p = new Person();          // ะกััะปะบะฐ p โ ะฒ ััะตะบะต, ะพะฑัะตะบั โ ะฒ ะบััะต
    p.Name = "Anton";                 // ะกััะพะบะฐ โ ะฒ ะบััะต
}
```

### ๐ ะะธะทัะฐะปะธะทะฐัะธั

```plaintext
[ Stack ]                          [ Heap ]
โโโโโโโโโโโโโ                     โโโโโโโโโโโโโโโโโโโโโโโโโโโโ
| x = 42     |                   | Person                    |
| p โโโโโโโ  | โโโโโโโ โโโโโโโ ->| Name โโโโโโโโ             |
โโโโโโโโโโโโโ                    โโโโโโโโโโโโโโโ             โ
                                [ string: "Anton" ] <โโโโโโโ
```

---

## ๐งฉ ะะปััะตะฒัะต ะพัะปะธัะธั

| ะฅะฐัะฐะบัะตัะธััะธะบะฐ   | ะกัะตะบ (Stack)                          | ะััะฐ (Heap)                 |
| ---------------- | ------------------------------------- | --------------------------- |
| ะฃะฟัะฐะฒะปะตะฝะธะต       | ะะฒัะพะผะฐัะธัะตัะบะพะต (ะฟัะธ ะฒััะพะดะต ะธะท ะผะตัะพะดะฐ) | ะฃะฟัะฐะฒะปัะตััั CLR (ัะตัะตะท GC)  |
| ะกะบะพัะพััั ะดะพัััะฟะฐ | ะัะตะฝั ะฑััััะฐั                         | ะะตะดะปะตะฝะฝะตะต                   |
| ะะฐะทะผะตั           | ะะณัะฐะฝะธัะตะฝ (ะพะฑััะฝะพ ะดะพ 1 ะะ)            | ะะพะปััะพะน (ะฒัะดะตะปัะตััั ะะก)     |
| ะขะธะฟั ะดะฐะฝะฝัั      | ะะฝะฐัะธะผัะต (Value types), ัััะปะบะธ        | ะกััะปะพัะฝัะต (Reference types) |
| ะะธะทะฝะตะฝะฝัะน ัะธะบะป   | ะะพ ะบะพะฝัะฐ ะผะตัะพะดะฐ                       | ะะพ ะธััะตะทะฝะพะฒะตะฝะธั ะฒัะตั ัััะปะพะบ |
| ะัะธะผะตั           | `int`, `bool`, `struct`               | `class`, `string`, `array`  |

---

## ๐ ะัั ะพะดะธะฝ ะฟัะธะผะตั ั ASCII-ััะตะผะพะน

```csharp
struct Point {
    public int X;
    public int Y;
}

class Rectangle {
    public Point TopLeft;
    public Point BottomRight;
}
```

```csharp
void Main() {
    Rectangle r = new Rectangle();
    r.TopLeft = new Point { X = 0, Y = 0 };
    r.BottomRight = new Point { X = 10, Y = 10 };
}
```

```plaintext
[ Stack ]
โโโโโโโโโโโโโโโ
| r โโโโโโโโโโ |
โโโโโโโโโโโโโโโ
             โ
[ Heap ]
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
| Rectangle                        |
| TopLeft: {X=0,Y=0}               |
| BottomRight: {X=10,Y=10}        |
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

> ๐ ะะฑัะฐัะธ ะฒะฝะธะผะฐะฝะธะต: ัะพัั `Point` โ ััััะบัััะฐ (ะทะฝะฐัะธะผัะน ัะธะฟ), ะฒ ะบััะต ะพะฝะธ ะฒะฝัััะธ ะพะฑัะตะบัะฐ `Rectangle`.

---


## ๐ ะะฐะบ ะฒะทะฐะธะผะพะดะตะนััะฒััั ะทะฝะฐัะธะผัะต ะธ ัััะปะพัะฝัะต ัะธะฟั

### ๐งฉ ะะฝะฐัะธะผัะต ัะธะฟั ะฒะฝัััะธ ัััะปะพัะฝัั

ะัะปะธ ะทะฝะฐัะธะผัะน ัะธะฟ (ะฝะฐะฟัะธะผะตั, `struct`) ะฝะฐัะพะดะธััั **ะฒะฝัััะธ ัััะปะพัะฝะพะณะพ ัะธะฟะฐ** (`class`), ัะพ:

* ะัั ััััะบัััะฐ ััะฐะฝะพะฒะธััั **ัะฐัััั ะพะฑัะตะบัะฐ**, ะบะพัะพััะน ััะฐะฝะธััั ะฒ **ะบััะต**
* ะะพะฟะธัะพะฒะฐะฝะธะต ะพะฑัะตะบัะฐ **ะฝะต ะบะพะฟะธััะตั** ัััะปะบั ะฝะฐ ััััะบัััั ะพัะดะตะปัะฝะพ โ ะพะฝะฐ ะฒัััะพะตะฝะฐ

#### ะัะธะผะตั:

```csharp
struct Point {
    public int X, Y;
}

class Figure {
    public Point Center;
}

var fig = new Figure();
fig.Center.X = 5;
```

**ะ ะฟะฐะผััะธ:**

```plaintext
[ Stack ]
โโโโโโโโโโโโโโ
| fig โโโโโโโ |  โ ัััะปะบะฐ ะฝะฐ Figure
โโโโโโโโโโโโโโ
            โ
[ Heap ]
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
| Figure                    |
| Center: { X=5, Y=0 }      |  โ ััััะบัััะฐ ะฒะฝัััะธ ะพะฑัะตะบัะฐ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

> `Point` ะทะดะตัั ะฝะต ะธะผะตะตั ัะฒะพะตะน "ัััะปะบะธ". ะะฝ ัะธะทะธัะตัะบะธ ะฒัััะพะตะฝ ะฒะฝัััั ะพะฑัะตะบัะฐ `Figure`.

---

### ๐ ะกััะปะพัะฝัะต ัะธะฟั ะฒะฝัััะธ ะทะฝะฐัะธะผัั

ะัะปะธ ะฒ ััััะบัััะต ะตััั ะฟะพะปะต ัััะปะพัะฝะพะณะพ ัะธะฟะฐ (ะฝะฐะฟัะธะผะตั, `string`, `class`), ัะพ:

* ะกะฐะผะฐ ััััะบัััะฐ ััะฐะฝะธััั ะฒ **ััะตะบะต** (ะธะปะธ ะบะฐะบ ัะฐััั ะดััะณะพะณะพ ะพะฑัะตะบัะฐ, ะตัะปะธ ะฒะปะพะถะตะฝะฐ)
* ะะพ **ัััะปะบะฐ** ะฒะฝัััะธ ะฝะตั ัะบะฐะทัะฒะฐะตั ะฒ ะบััั

#### ะัะธะผะตั:

```csharp
struct Message {
    public string Text;
}

void Main() {
    Message msg = new Message();
    msg.Text = "Hello";
}
```

**ะ ะฟะฐะผััะธ:**

```plaintext
[ Stack ]
โโโโโโโโโโโโโโโโโโ
| msg.Text โโโโโ  | โ ััััะบัััะฐ ัะตะปะธะบะพะผ ะฒ ััะตะบะต
โโโโโโโโโโโโโโโโโโ
               โ
[ Heap ]
โโโโโโโโโโโโโโ
| "Hello"     | โ ัััะพะบะฐ โ ัััะปะพัะฝัะน ัะธะฟ
โโโโโโโโโโโโโโ
```

---

### ๐ง ะะพะฟะธัะพะฒะฐะฝะธะต: ะะฐะถะฝะพะต ัะฐะทะปะธัะธะต

```csharp
Point p1 = new Point { X = 1, Y = 2 };
Point p2 = p1;         // ะะพะฟะธััะตััั ะะะะงะะะะ
p2.X = 99;

Console.WriteLine(p1.X); // 1 โ ะฝะต ะธะทะผะตะฝะธะปะพัั!
```

```csharp
Person a = new Person { Name = "Anton" };
Person b = a;           // ะะพะฟะธััะตััั ะกะกะซะะะ
b.Name = "John";

Console.WriteLine(a.Name); // John โ ะพะฑัะตะบั ะพะดะธะฝ!
```

| ะขะธะฟ      | ะะพะฒะตะดะตะฝะธะต ะฟัะธ ะฟัะธัะฒะฐะธะฒะฐะฝะธะธ                |
| -------- | ----------------------------------------- |
| `struct` | ะะพะฟะธััะตััั ะฟะพะปะฝะพัััั                      |
| `class`  | ะะพะฟะธััะตััั ัััะปะบะฐ ะฝะฐ ะพะดะธะฝ ะธ ัะพั ะถะต ะพะฑัะตะบั |

---

## ๐ ะัะพะณะพ

| ะกัะตะฝะฐัะธะน                     | ะะดะต ััะฐะฝัััั ะดะฐะฝะฝัะต                     |
| ---------------------------- | --------------------------------------- |
| `struct` ะฒ `class`           | ะ ะบััะต, ะบะฐะบ ัะฐััั ะพะฑัะตะบัะฐ               |
| `class` ะฒ `struct`           | ะกะฐะผะฐ ััััะบัััะฐ ะฒ ััะตะบะต, ัััะปะบะฐ โ ะฒ ะฟะพะปะต |
| `struct` ะฒ ััะตะบะต (ะปะพะบะฐะปัะฝะพ)  | ะฆะตะปะธะบะพะผ ะฒ ััะตะบะต                         |
| `class` ะฒ ััะตะบะต (ะบะฐะบ ัััะปะบะฐ) | ะขะพะปัะบะพ ัััะปะบะฐ ะฒ ััะตะบะต, ะพะฑัะตะบั โ ะฒ ะบััะต  |
| ะัะธัะฒะฐะธะฒะฐะฝะธะต `struct`        | ะะพะฟะธั                                   |
| ะัะธัะฒะฐะธะฒะฐะฝะธะต `class`         | ะกััะปะบะฐ                                  |

> ๐ ะญัะพ ะบะปััะตะฒะพะต ัะฐะทะปะธัะธะต ะพะฟัะตะดะตะปัะตั ะฟะพะฒะตะดะตะฝะธะต ะฟัะธ ะฟะตัะตะดะฐัะต ะฟะพ ะทะฝะฐัะตะฝะธั ะธ ัััะปะบะต, ะฐ ัะฐะบะถะต ะฒะปะธัะตั ะฝะฐ ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััั.


---

## ๐ ะะตะทัะผะต

* **ะกัะตะบ** โ ะฑัััััะน, ะฝะตะฑะพะปััะพะน, ะธัะฟะพะปัะทัะตััั ะดะปั ะฒัะตะผะตะฝะฝัั ะธ ะฟัะธะผะธัะธะฒะฝัั ะดะฐะฝะฝัั
* **ะััะฐ** โ ะณะธะฑะบะธะน, ะฟะพะดัะพะดะธั ะดะปั ััะฐะฝะตะฝะธั ะพะฑัะตะบัะพะฒ, ัะฟัะฐะฒะปัะตััั CLR
* **ะกััะปะบะธ ะฝะฐ ะพะฑัะตะบัั** ะฒัะตะณะดะฐ ััะฐะฝัััั ะฒ ััะตะบะต, ัะฐะผะธ ะพะฑัะตะบัั โ ะฒ ะบััะต
* ะะพะฝะธะผะฐะฝะธะต ัะฐะทะปะธัะธะน ะฒะฐะถะฝะพ ะดะปั ะฝะฐะฟะธัะฐะฝะธั **ัััะตะบัะธะฒะฝะพะณะพ** ะธ **ะฟัะตะดัะบะฐะทัะตะผะพะณะพ ะฟะพ ะฟะฐะผััะธ** ะบะพะดะฐ

> ๐ ะขะตะผะฐ ัะฐะฑะพัั ัะฑะพััะธะบะฐ ะผััะพัะฐ (Garbage Collector) ะฑัะดะตั ัะฐััะผะพััะตะฝะฐ ะพัะดะตะปัะฝะพ โ ะพะฝะฐ ะบัะธัะธัะตัะบะธ ะฒะฐะถะฝะฐ ะดะปั ัะฐะฑะพัั ั ะบััะตะน, ะฝะพ ััะตะฑัะตั ะดะตัะฐะปัะฝะพะณะพ ะฒะฝะธะผะฐะฝะธั.

