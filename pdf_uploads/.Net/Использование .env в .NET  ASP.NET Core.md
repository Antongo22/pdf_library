# üå± –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `.env` –≤ .NET / ASP.NET Core

## üìå –ß—Ç–æ —Ç–∞–∫–æ–µ `.env`?

`.env` ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –ø–∞—Ä—ã **–∫–ª—é—á=–∑–Ω–∞—á–µ–Ω–∏–µ**. –û–Ω –æ–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è **–ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è**: —Å–µ–∫—Ä–µ—Ç–æ–≤, –∫–ª—é—á–µ–π, URL –∏ –¥—Ä—É–≥–∏—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–ª—å–∑—è —Ö–∞—Ä–¥–∫–æ–¥–∏—Ç—å.

–ü—Ä–∏–º–µ—Ä `.env`:

```env
CONNECTION_STRING=Host=localhost;Port=5432;Database=mydb;
API_KEY=super-secret
ASPNETCORE_ENVIRONMENT=Development
```

---

## ‚úÖ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `.env` –≤ .NET

–í —á–∏—Å—Ç–æ–º .NET (–≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç Node.js –∏–ª–∏ Python) `.env` **–Ω–µ –ø–æ–¥–≥—Ä—É–∂–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**. –ß—Ç–æ–±—ã —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å:

---

## üîå –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∏ –ø–∞–∫–µ—Ç `DotNetEnv`

–ß–µ—Ä–µ–∑ CLI:

```bash
dotnet add package DotNetEnv
```

–ò–ª–∏ —á–µ—Ä–µ–∑ `.csproj`:

```xml
<PackageReference Include="DotNetEnv" Version="3.1.3" />
```

---

## üõ†Ô∏è –®–∞–≥ 2: –ó–∞–≥—Ä—É–∑–∏—Ç–µ `.env` –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ

–í `Program.cs` –∏–ª–∏ `Startup.cs`:

```csharp
using DotNetEnv;

public class Program
{
    public static void Main(string[] args)
    {
        // –ü–æ–¥–≥—Ä—É–∂–∞–µ–º .env –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
        DotNetEnv.Env.Load();

        CreateHostBuilder(args).Build().Run();
    }
}
```

---

## üß™ –®–∞–≥ 3: –ò—Å–ø–æ–ª—å–∑—É–π –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ –∫–æ–¥–µ

–ü—Ä–∏–º–µ—Ä:

```csharp
string apiKey = Environment.GetEnvironmentVariable("API_KEY");
```

–ò–ª–∏ —Å ASP.NET Core DI:

```csharp
public class MyService
{
    public MyService(IConfiguration config)
    {
        var conn = config["CONNECTION_STRING"];
    }
}
```

> ‚ö†Ô∏è –ï—Å–ª–∏ —Ç—ã —Ö–æ—á–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `.env` –Ω–∞–ø—Ä—è–º—É—é –≤ `IConfiguration`, —Å–º. —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥.

---

## üìö (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ `.env`

–¢—ã –º–æ–∂–µ—à—å —Ä–∞—Å—à–∏—Ä–∏—Ç—å `IConfiguration` —Ç–∞–∫, —á—Ç–æ–±—ã `.env` —Ñ–∞–π–ª —Å—Ç–∞–ª —á–∞—Å—Ç—å—é `appsettings`.

```csharp
public static IHostBuilder CreateHostBuilder(string[] args) =>
    Host.CreateDefaultBuilder(args)
        .ConfigureAppConfiguration((hostingContext, config) =>
        {
            DotNetEnv.Env.Load(); // –∑–∞–≥—Ä—É–∂–∞–µ–º –≤ ENV
            // config.AddEnvironmentVariables(); // —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        })
        .ConfigureWebHostDefaults(webBuilder =>
        {
            webBuilder.UseStartup<Startup>();
        });
```

---

## üßº –î–æ–±–∞–≤—å `.env` –≤ `.gitignore`

–ß—Ç–æ–±—ã —Å–ª—É—á–∞–π–Ω–æ –Ω–µ –∑–∞–ª–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã:

```gitignore
.env
```

---

## üß† –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `.env`

| –°—Ü–µ–Ω–∞—Ä–∏–π                               | –ü–æ–¥—Ö–æ–¥–∏—Ç?                                 |
| -------------------------------------- | ----------------------------------------- |
| –•—Ä–∞–Ω–µ–Ω–∏–µ –∫–ª—é—á–µ–π –∏ —Ç–æ–∫–µ–Ω–æ–≤              | ‚úÖ                                         |
| –õ–æ–∫–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –±–µ–∑ `secrets.json` | ‚úÖ                                         |
| Production / CI/CD —á–µ—Ä–µ–∑ Docker        | ‚úÖ                                         |
| –°–ª–æ–∂–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è        | ‚ùå –õ—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `appsettings.*.json` |

---

## üê≥ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å Docker

`.env` –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ `docker-compose`:

```yaml
env_file:
  - .env
```

---

## üìå –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: `appsettings.json` + `dotnet user-secrets`

* `.env` ‚Äî —É–¥–æ–±–Ω–æ –≤ Docker –∏ Linux
* `appsettings.json` ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
* `user-secrets` ‚Äî –¥–ª—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ dev



---

## üì¶ –ö–∞–∫ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å `.env` –≤ `bin`?

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `.env` **–Ω–µ –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –≤ –≤—ã—Ö–æ–¥–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é (`bin/Debug/...`)**, –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ —Å–º–æ–∂–µ—Ç –µ–≥–æ –Ω–∞–π—Ç–∏. –ß—Ç–æ–±—ã —ç—Ç–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å ‚Äî –Ω—É–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å —ç—Ç–æ —è–≤–Ω–æ –≤ `.csproj`:

### üîß –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ `.csproj`

–ú–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –≤ —Å–≤–æ–π—Å—Ç–≤–∞—Ö —Ñ–∞–π–ª–∞ - –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ. 

–î—Ä–æ–≥–æ–π –≤–∞—Ä–∏–∞–Ω—Ç - 
–û—Ç–∫—Ä–æ–π —Ñ–∞–π–ª –ø—Ä–æ–µ–∫—Ç–∞ `.csproj` –∏ –¥–æ–±–∞–≤—å:

```xml
<ItemGroup>
  <None Update=".env">
    <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
  </None>
</ItemGroup>
```

üìå –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:

* `Update=".env"` ‚Äî –≥–æ–≤–æ—Ä–∏—Ç, —á—Ç–æ –º—ã –æ–±–Ω–æ–≤–ª—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Ñ–∞–π–ª–∞.
* `CopyToOutputDirectory` ‚Äî —É–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ–º:

  * `PreserveNewest` ‚Äî –∫–æ–ø–∏—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ñ–∞–π–ª –∏–∑–º–µ–Ω–∏–ª—Å—è
  * `Always` ‚Äî –≤—Å–µ–≥–¥–∞ –∫–æ–ø–∏—Ä—É–µ—Ç

–¢–µ–ø–µ—Ä—å —Ñ–∞–π–ª `.env` –æ–∫–∞–∂–µ—Ç—Å—è –≤ –ø–∞–ø–∫–µ `bin/Debug/net8.0/`, –∏ `DotNetEnv.Env.Load()` —Å–º–æ–∂–µ—Ç –µ–≥–æ –Ω–∞–π—Ç–∏.

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ –ø—Ä–æ–≤–µ—Ä—å:

```bash
ls bin/Debug/net8.0/
```

–¢—ã –¥–æ–ª–∂–µ–Ω —É–≤–∏–¥–µ—Ç—å —Ç–∞–º `.env`.

---

## üß† –°–æ–≤–µ—Ç

–ï—Å–ª–∏ —É —Ç–µ–±—è –Ω–µ—Å–∫–æ–ª—å–∫–æ `.env` —Ñ–∞–π–ª–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä `.env.dev`, `.env.prod`) ‚Äî –¥–æ–±–∞–≤—å –Ω—É–∂–Ω—ã–π –≤ –ø—Ä–æ–µ–∫—Ç –∏ —É–∫–∞–∂–∏ –∏–º—è —è–≤–Ω–æ:

```csharp
DotNetEnv.Env.Load(".env.dev");
```

–ò –Ω–µ –∑–∞–±—É–¥—å:

```xml
<None Update=".env.dev">
  <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
</None>
```

---

–ë–µ–∑ —è–≤–Ω–æ–≥–æ —É–∫–∞–∑–∞–Ω–∏—è `.env` –Ω–µ –ø–æ–ø–∞–¥—ë—Ç –≤ `bin`, –∏ `DotNetEnv` –Ω–µ —Å–º–æ–∂–µ—Ç –µ–≥–æ –Ω–∞–π—Ç–∏. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–±–∞–≤—å –µ–≥–æ –≤ `.csproj` –∫–∞–∫ `CopyToOutputDirectory`, –æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ —Ç—ã —Ä–∞–±–æ—Ç–∞–µ—à—å —Å `dotnet run`, Docker –∏–ª–∏ CI.

---



## ‚úÖ –í—ã–≤–æ–¥

`.env` –≤ .NET:

* –ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –∏–∑ –∫–æ—Ä–æ–±–∫–∏, –Ω–æ –ª–µ–≥–∫–æ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è
* –£–¥–æ–±–µ–Ω –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å—Ä–µ–¥—ã
* –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–æ–≤–º–µ—Å—Ç–Ω–æ —Å `Environment.GetEnvironmentVariable` –∏–ª–∏ `IConfiguration`
