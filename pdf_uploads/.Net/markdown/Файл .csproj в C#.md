# üìÑ –§–∞–π–ª `.csproj` –≤ C\#

–§–∞–π–ª `*.csproj` ‚Äî —ç—Ç–æ **–æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª –ø—Ä–æ–µ–∫—Ç–∞ –≤ C# (.NET)**, –∫–æ—Ç–æ—Ä—ã–π –æ–ø–∏—Å—ã–≤–∞–µ—Ç, –∫–∞–∫ –ø—Ä–æ–µ–∫—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–æ–±—Ä–∞–Ω, –∫–∞–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –∫–∞–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∏ —Ç.–¥.

–û–Ω –Ω–∞–ø–∏—Å–∞–Ω –≤ —Ñ–æ—Ä–º–∞—Ç–µ **XML** –∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é `MSBuild`. –•–æ—Ç—è –º–Ω–æ–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–∂–Ω–æ –∑–∞–¥–∞–≤–∞—Ç—å —á–µ—Ä–µ–∑ CLI (`dotnet`), –ø–æ–Ω–∏–º–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ `csproj` –≤–∞–∂–Ω—ã –ø—Ä–∏ –≥–ª—É–±–æ–∫–æ–π —Ä–∞–±–æ—Ç–µ —Å –ø—Ä–æ–µ–∫—Ç–∞–º–∏.

---

## üß± –û–±—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–∞ `.csproj`

–ü—Ä–∏–º–µ—Ä –ø—Ä–æ—Å—Ç–æ–≥–æ `csproj`:

```xml
<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <OutputType>Exe</OutputType>
    <TargetFramework>net8.0</TargetFramework>
    <Nullable>enable</Nullable>
    <ImplicitUsings>enable</ImplicitUsings>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="Newtonsoft.Json" Version="13.0.3" />
    <ProjectReference Include="..\MyLibrary\MyLibrary.csproj" />
  </ItemGroup>

</Project>
```

---

## üîç –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –ø–æ —Å–µ–∫—Ü–∏—è–º

### üß† `<Project Sdk="...">`

* –£–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫–æ–π SDK –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å. –û–±—ã—á–Ω–æ:

  * `Microsoft.NET.Sdk` ‚Äî –¥–ª—è –æ–±—ã—á–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
  * `Microsoft.NET.Sdk.Web` ‚Äî –¥–ª—è ASP.NET Core Web-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
  * `Microsoft.NET.Sdk.Razor` ‚Äî –¥–ª—è Razor Class Libraries (Blazor, Razor Pages)

---

### üõ† `<PropertyGroup>`

–í —ç—Ç–æ–º –±–ª–æ–∫–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è —Å–≤–æ–π—Å—Ç–≤–∞ –ø—Ä–æ–µ–∫—Ç–∞:

| –≠–ª–µ–º–µ–Ω—Ç             | –û–ø–∏—Å–∞–Ω–∏–µ                                                         |
| ------------------- | ---------------------------------------------------------------- |
| `<OutputType>`      | `Exe` (–∫–æ–Ω—Å–æ–ª—å) –∏–ª–∏ `Library` (–±–∏–±–ª–∏–æ—Ç–µ–∫–∞)                       |
| `<TargetFramework>` | –¶–µ–ª–µ–≤–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä `net6.0`, `net8.0`, `netstandard2.1` |
| `<Nullable>`        | –í–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ Nullable Reference Types (`enable/disable`) |
| `<ImplicitUsings>`  | –í–∫–ª—é—á–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ using'–æ–≤ –¥–ª—è .NET SDK         |
| `<LangVersion>`     | –Ø–≤–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ –≤–µ—Ä—Å–∏–∏ —è–∑—ã–∫–∞ C# (–Ω–∞–ø—Ä–∏–º–µ—Ä, `11.0`)                |
| `<AssemblyName>`    | –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –≤—ã—Ö–æ–¥–Ω–æ–π —Å–±–æ—Ä–∫–∏                                   |
| `<RootNamespace>`   | –ö–æ—Ä–Ω–µ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∏–º—ë–Ω                                       |

–ü—Ä–∏–º–µ—Ä:

```xml
<PropertyGroup>
  <OutputType>Exe</OutputType>
  <TargetFramework>net8.0</TargetFramework>
  <LangVersion>11.0</LangVersion>
</PropertyGroup>
```

---

### üì¶ `<ItemGroup>`: –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Å—Å—ã–ª–∫–∏

–°–æ–¥–µ—Ä–∂–∏—Ç –±–ª–æ–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

#### üì¶ NuGet-–ø–∞–∫–µ—Ç—ã:

```xml
<ItemGroup>
  <PackageReference Include="Dapper" Version="2.0.123" />
</ItemGroup>
```

#### üîó –°—Å—ã–ª–∫–∏ –Ω–∞ –ø—Ä–æ–µ–∫—Ç—ã:

```xml
<ItemGroup>
  <ProjectReference Include="..\MyLibrary\MyLibrary.csproj" />
</ItemGroup>
```

#### üìÅ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤:

```xml
<ItemGroup>
  <None Include="appsettings.json" CopyToOutputDirectory="Always" />
</ItemGroup>
```

---

### üîÑ –£—Å–ª–æ–≤–∏—è –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–ú–æ–∂–Ω–æ –∑–∞–¥–∞–≤–∞—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ –¥–ª—è `Debug` –∏ `Release`:

```xml
<PropertyGroup Condition="'$(Configuration)' == 'Debug'">
  <DefineConstants>DEBUG;TRACE</DefineConstants>
</PropertyGroup>

<PropertyGroup Condition="'$(Configuration)' == 'Release'">
  <Optimize>true</Optimize>
</PropertyGroup>
```

---

### üìå –í–∫–ª—é—á–µ–Ω–∏–µ/–∏—Å–∫–ª—é—á–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

```xml
<ItemGroup>
  <Compile Include="ExtraClass.cs" />
  <Compile Remove="Obsolete.cs" />
</ItemGroup>
```

---

## üß∞ –ü–æ–ª–µ–∑–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

* **–°–±–æ—Ä–∫–∞ –∫—Ä–æ—Å—Å-–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫ (–º—É–ª—å—Ç–∏—Ç–∞—Ä–≥–µ—Ç–∏–Ω–≥)**

```xml
<PropertyGroup>
  <TargetFrameworks>net6.0;netstandard2.1;net8.0</TargetFrameworks>
</PropertyGroup>
```

* –ß—Ç–æ —ç—Ç–æ?
  –ü–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ–¥–Ω—É —Å–±–æ—Ä–∫—É, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â—É—é —Å—Ä–∞–∑—É –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º/.NET-–≤–µ—Ä—Å–∏–π. –ü—Ä–∏ —Å–±–æ—Ä–∫–µ –ø—Ä–æ–µ–∫—Ç –±—É–¥–µ—Ç –∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å—Å—è –ø–æ–¥ –∫–∞–∂–¥—É—é —É–∫–∞–∑–∞–Ω–Ω—É—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –æ—Ç–¥–µ–ª—å–Ω–æ.

* –î–ª—è —á–µ–≥–æ —ç—Ç–æ –ø–æ–ª–µ–∑–Ω–æ?
  –ï—Å–ª–∏ –≤—ã –ø–∏—à–µ—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫—É, –∫–æ—Ç–æ—Ä—É—é –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏ –≤ —Å—Ç–∞—Ä—ã—Ö, –∏ –≤ –Ω–æ–≤—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö, –∏–ª–∏ –∫—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–π –∫–æ–¥ ‚Äî –º—É–ª—å—Ç–∏—Ç–∞—Ä–≥–µ—Ç–∏–Ω–≥ —É–ø—Ä–æ—Å—Ç–∏—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É.

---

* **–ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ Docker**

–§–∞–π–ª `.csproj` –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ Docker —á–µ—Ä–µ–∑ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–≤–æ–π—Å—Ç–≤ –∏ —Ü–µ–ª–µ–π.

–ù–∞–ø—Ä–∏–º–µ—Ä, –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å, —á—Ç–æ –ø—Ä–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –Ω–∞–¥–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π (self-contained) –æ–±—Ä–∞–∑ —Å –Ω—É–∂–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π:

```xml
<PropertyGroup>
  <PublishProfile>FolderProfile</PublishProfile>
  <PublishSingleFile>true</PublishSingleFile>
  <RuntimeIdentifier>linux-x64</RuntimeIdentifier>
  <SelfContained>true</SelfContained>
</PropertyGroup>
```

* `RuntimeIdentifier` ‚Äî —É–∫–∞–∑—ã–≤–∞–µ—Ç —Ü–µ–ª–µ–≤—É—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –¥–ª—è —Å–±–æ—Ä–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `win-x64`, `linux-x64`, `osx-x64` –∏ –¥—Ä.)
* `SelfContained` ‚Äî —Å–æ–∑–¥–∞–µ—Ç –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª, –Ω–µ —Ç—Ä–µ–±—É—é—â–∏–π —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ .NET –Ω–∞ —Ö–æ—Å—Ç–µ
* `PublishSingleFile` ‚Äî —É–ø–∞–∫–æ–≤–∫–∞ –≤ –æ–¥–∏–Ω —Ñ–∞–π–ª

–≠—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –≤ —Å–≤—è–∑–∫–µ —Å Dockerfile, —á—Ç–æ–±—ã –ø—Ä–∏ `dotnet publish` —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ñ–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –∫–æ–ø–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.

---

* **–ö–∞—Å—Ç–æ–º–Ω—ã–µ —Å–±–æ—Ä–æ—á–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è (`BeforeBuild`, `AfterBuild`)**

–í `.csproj` –º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –¥–æ –∏–ª–∏ –ø–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞:

```xml
<Target Name="BeforeBuild">
  <Exec Command="echo '–ù–∞—á–∏–Ω–∞–µ–º —Å–±–æ—Ä–∫—É –ø—Ä–æ–µ–∫—Ç–∞...'" />
</Target>

<Target Name="AfterBuild">
  <Exec Command="echo '–°–±–æ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!'" />
</Target>
```

* `BeforeBuild` ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–æ –Ω–∞—á–∞–ª–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
* `AfterBuild` ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∫–æ–º–ø–∏–ª—è—Ü–∏–∏

–í –∫–æ–º–∞–Ω–¥–∞—Ö `<Exec Command="..."/>` –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –ª—é–±—ã–µ –∫–æ–Ω—Å–æ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã, —Å–∫—Ä–∏–ø—Ç—ã, –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤, –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∫–æ–¥–∞ –∏ —Ç.–¥.

–ü—Ä–∏–º–µ—Ä –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è:

```xml
<Target Name="AfterBuild">
  <Exec Command="dotnet test ..\Tests\MyTests.csproj" />
</Target>
```

–≠—Ç–æ—Ç –∫–æ–¥ –∑–∞–ø—É—Å—Ç–∏—Ç —Ç–µ—Å—Ç—ã –ø–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏.

---

## üîç –ö–∞–∫ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å `.csproj`

1. –ß–µ—Ä–µ–∑ IDE (Visual Studio –∏–ª–∏ Rider) ‚Äî —á–∞—â–µ –≤—Å–µ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
2. –ß–µ—Ä–µ–∑ `dotnet` CLI ‚Äî –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ:

   ```bash
   dotnet add package Dapper
   dotnet add reference ../MyLib/MyLib.csproj
   ```
3. –í—Ä—É—á–Ω—É—é ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —É—Å–ª–æ–≤–Ω–æ–π –∫–æ–º–ø–∏–ª—è—Ü–∏–∏, —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤, —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ —Ç.–¥.).

---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

* [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ MSBuild](https://learn.microsoft.com/en-us/visualstudio/msbuild/msbuild)
* [–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ `.csproj`](https://learn.microsoft.com/dotnet/core/project-sdk/overview)
* [–ü—É–±–ª–∏–∫–∞—Ü–∏—è –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π .NET](https://learn.microsoft.com/dotnet/core/deploying/)
* [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –º—É–ª—å—Ç–∏—Ç–∞—Ä–≥–µ—Ç–∏–Ω–≥—É](https://learn.microsoft.com/dotnet/core/project-sdk/multi-targeting)
* [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —Ü–µ–ª–µ–π MSBuild](https://learn.microsoft.com/visualstudio/msbuild/customize-your-build)
