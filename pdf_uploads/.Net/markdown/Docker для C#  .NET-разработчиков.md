# üê≥ Docker –¥–ª—è C# / .NET-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

## üìå –ß—Ç–æ —Ç–∞–∫–æ–µ Docker?

**Docker** ‚Äî —ç—Ç–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —É–ø–∞–∫–æ–≤–∫–∏, —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –∏ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –≤ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö. –í–º–µ—Å—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤—Ä—É—á–Ω—É—é, —Ç—ã –æ–¥–∏–Ω —Ä–∞–∑ —Å–æ–±–∏—Ä–∞–µ—à—å **–æ–±—Ä–∞–∑**, –∏ –º–æ–∂–µ—à—å –∑–∞–ø—É—Å–∫–∞—Ç—å –µ–≥–æ –≥–¥–µ —É–≥–æ–¥–Ω–æ.

---

## ‚öôÔ∏è –ó–∞—á–µ–º C#-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É Docker?

* ‚úÖ –ó–∞–ø—É—Å–∫ .NET-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –ª—é–±–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏ (–±–µ–∑ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ .NET SDK)
* üß™ –ò–∑–æ–ª—è—Ü–∏—è –æ—Ç —Å–∏—Å—Ç–µ–º—ã —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞
* üêû –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ª–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ .NET
* üöÄ –£–ø—Ä–æ—â—ë–Ω–Ω—ã–π –¥–µ–ø–ª–æ–π –≤ –æ–±–ª–∞–∫–æ (Azure, AWS, Kubernetes)

---

## üèóÔ∏è –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ .NET –ø—Ä–æ–µ–∫—Ç–∞ —Å Docker

–ü—Ä–∏–º–µ—Ä `Dockerfile` –¥–ª—è ASP.NET Core –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

```dockerfile
# 1. –°—Ç—Ä–æ–∏–º –æ–±—Ä–∞–∑ (stage build)
FROM mcr.microsoft.com/dotnet/sdk:8.0 AS build
WORKDIR /app

COPY *.csproj ./
RUN dotnet restore

COPY . ./
RUN dotnet publish -c Release -o out

# 2. –ó–∞–ø—É—Å–∫–∞–µ–º—ã–π –æ–±—Ä–∞–∑
FROM mcr.microsoft.com/dotnet/aspnet:8.0 AS runtime
WORKDIR /app
COPY --from=build /app/out ./

ENTRYPOINT ["dotnet", "MyApp.dll"]
```

---

## üì¶ –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã Docker

| –ö–æ–º–∞–Ω–¥–∞                       | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                    |
| ----------------------------- | ----------------------------- |
| `docker build -t myapp .`     | –°–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑                 |
| `docker run -p 8080:80 myapp` | –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä           |
| `docker ps`                   | –°–ø–∏—Å–æ–∫ –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ |
| `docker stop <id>`            | –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä          |
| `docker images`               | –°–ø–∏—Å–æ–∫ –æ–±—Ä–∞–∑–æ–≤                |

---

## üìÅ –ü—Ä–∏–º–µ—Ä Docker Compose

–ï—Å–ª–∏ —É —Ç–µ–±—è –µ—Å—Ç—å –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ API ‚Äî —É–¥–æ–±–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `docker-compose.yml`:

```yaml
version: '3.8'

services:
  api:
    build: .
    ports:
      - "5000:80"
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
    depends_on:
      - db

  db:
    image: postgres:15
    environment:
      POSTGRES_USER: user
      POSTGRES_PASSWORD: pass
      POSTGRES_DB: mydb
    volumes:
      - pgdata:/var/lib/postgresql/data

volumes:
  pgdata:
```

---

## üß™ –ü—Ä–∏–º–µ—Ä –∑–∞–ø—É—Å–∫–∞

```bash
# –°–±–æ—Ä–∫–∞
docker build -t myapp .

# –ó–∞–ø—É—Å–∫
docker run -p 5000:80 myapp
```

–ü–µ—Ä–µ–π–¥–∏ –ø–æ –∞–¥—Ä–µ—Å—É [http://localhost:5000](http://localhost:5000), —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

---

## üß† –ß—Ç–æ –Ω—É–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å

* –ò—Å–ø–æ–ª—å–∑—É–π `sdk`-–æ–±—Ä–∞–∑ –¥–ª—è —Å–±–æ—Ä–∫–∏ –∏ `aspnet`-–æ–±—Ä–∞–∑ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ (multi-stage build)
* –ù–µ –∑–∞–±—É–¥—å –ø—Ä–æ `.dockerignore`, —á—Ç–æ–±—ã –Ω–µ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ª–∏—à–Ω–µ–µ
* –î–ª—è dev-—Ä–µ–∂–∏–º–∞ —É–¥–æ–±–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `docker-compose`

---

## üìÇ –ü—Ä–∏–º–µ—Ä .dockerignore

```dockerignore
bin/
obj/
*.user
*.suo
.vscode/
*.log
```

---

## üîê –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

* –ò—Å–ø–æ–ª—å–∑—É–π `.env` —Ñ–∞–π–ª –¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å—Ä–µ–¥—ã
* –ü—Ä–æ–∫–∏–¥—ã–≤–∞–π `volumes`, –µ—Å–ª–∏ —Ö–æ—á–µ—à—å —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –¥–∞–Ω–Ω—ã–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ PostgreSQL)
* –í –ø—Ä–æ–¥–µ –∏—Å–ø–æ–ª—å–∑—É–π `ENTRYPOINT` –∏ `HEALTHCHECK`

---

## üìö –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

Docker –≤ .NET ‚Äî —ç—Ç–æ:

* üíº –ü–æ—Ä—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å
* üßπ –ß–∏—Å—Ç–æ—Ç–∞ —Å—Ä–µ–¥—ã
* üöÄ –ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π
* üîÅ –û—Ç–ª–∏—á–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –¥–ª—è CI/CD

